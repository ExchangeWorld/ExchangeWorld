<md-content class="xmas" resize ng-style="resizeWithOffset(56)" ng-show="vm.exchangeList.length === 0">
	<div layout="column" layout-align="center center" style="height:100%;">
		<h2 class="md-display-1 xmas-font" style="margin:20px 0; text-align: center">你沒有正在交換的物品喔！</h2>
		<div layout layout-align="center center" style="height:50%; width:auto;">
			<img src="../../images/emoji.png" style="max-width:90%; max-height: 90%; ">
		</div>
		<p class="md-title info_container xmas-font" style="text-align: center;">
			立即在探索頁面尋找您喜歡的物品吧
		</p>
		<div style="margin-top: 20px;">
			<md-button class="md-raised md-accent" ng-click="vm.goSeek()">
				<span style="color:#fff; font-weight: 500;">查看！</span>
			</md-button>
		</div>
	</div>
</md-content>
<md-content resize ng-style="resizeWithOffset(56)" ng-show="vm.exchangeList.length !== 0" class="ex-bg xmas">
	<div layout="column" layout-gt-md="row" class="layout-ex">
		<div hide-gt-md>
			<div layout layout-align="center center" style="margin-top: 20px;">
				<md-button class="md-icon-button md-primary" ng-click="vm.openLeftMenu()">
					<div layout layout-align="center">
						<i class="material-icons md-36">dns</i>
					</div>
				</md-button>
				<md-button class="md-icon-button md-primary" ng-click="vm.openRightMenu()" ng-show="vm.exchange !== undefined">
					<div layout layout-align="center">
						<i class="material-icons md-36">chat</i>
					</div>
				</md-button>
			</div>
			<md-sidenav md-component-id="left" class="md-sidenav-left">
				<div class="event-btn" layout="row" layout-algin="center center" ng-repeat="exchange in vm.exchangeList" ng-click="vm.onClickExchange($index); vm.closeleft()">
					<div flex="25" layout layout-align="center center">
						<img class="circle exchange" ng-src="{{exchange.details.goods[exchange.lookupTable.other].user.photo_path}}" />
					</div>
					<div flex="55" layout="column" layout-align="center center">
						<p class="md-body-1 note goods-1">{{ exchange.details.goods[exchange.lookupTable.me].name }}</p>
						<p class="md-body-1 note goods-2">{{ exchange.details.goods[exchange.lookupTable.other].name }}</p>
					</div>
					<div flex="15" layout layout-align="center center">
						<img style="max-height: 100%; max-width:100%;" src="../../images/Logo(ex).png" />
					</div>
				</div>
			</md-sidenav>
		</div>
		<div class="sidebar-ex" flex-gt-md="20" layout="row" layout-gt-md="column" layout-wrap layout-align-sm="center center" style="max-height:100%;" hide-sm hide-md>
			<div class="event-btn hvr-bubble-float-left" layout="row" layout-algin="center center" flex-sm="45" ng-repeat="exchange in vm.exchangeList" ng-click="vm.onClickExchange($index)">
				<div flex="55" flex-md="70" flex-sm="70" layout="column" layout-align="center center">
					<p class="md-body-1 note goods-1">{{ exchange.details.goods[exchange.lookupTable.me].name }}</p>
					<p class="md-body-1 note goods-2">{{ exchange.details.goods[exchange.lookupTable.other].name }}</p>
				</div>
				<div flex layout layout-align="center center">
					<img class="circle exchange" ng-src="{{exchange.details.goods[exchange.lookupTable.other].user.photo_path}}" />
				</div>
				<span flex="5"></span>
			</div>
		</div>
		<div ng-show="vm.exchange === undefined" flex-gt-md="80" layout layout-align="center center">
			<h2 class="md-display-1 xmas-font" hide-md hide-sm>點擊左側清單觀看目前正在進行的交換</h2>
			<div flex-md="80" flex-sm="80">
				<h2 class="md-display-1 xmas-font" hide-gt-md style="text-align:center;">點擊上方清單觀看目前正在進行的交換</h2>
			</div>
		</div>
		<span flex-gt-md="5"></span>
		<div ng-show="vm.exchange !== undefined" flex-gt-md="50" style="height:100%; max-height: 100%;" layout-gt-md="row" layout-align="center center">
			<div layout="row" flex="100" layout-wrap class="info_container layout-ex center">
				<span flex="5" flex-gt-md="0"></span>
				<md-card flex="40" flex-sm="35" class="md-whiteframe-z3 item hvr-glow" ng-style="vm.exchange.details.goods[vm.exchange.lookupTable.me].bgStyle">
					<div layout="column">
						<md-card ng-style="vm.exchange.details.goods[vm.exchange.lookupTable.me].bgStyle">
							<div layout layout-align="center center" style="height:250px; width:auto;">
								<img 
									id="img_me" 
									crossorigin="anonymous" 
									ng-src="{{vm.exchange.details.goods[vm.exchange.lookupTable.me].photo_path[0]}}" 
									ng-click="vm.onClickGoods(vm.exchange.details.goods[vm.exchange.lookupTable.me].gid)" 
									class="md-card-image" 
									style="cursor:pointer; max-height: 100%; max-width: 100%; width:auto; "
									ng-show="vm.exchange.details.goods[vm.exchange.lookupTable.me].category !== 'Christmas'"
								/>

								<img 
									id="img_me" 
									crossorigin="anonymous"
									src="./../images/Gift(Small).jpg"
									ng-click="vm.onClickGoods(vm.exchange.details.goods[vm.exchange.lookupTable.me].gid)"
									class="md-card-image"
									style="cursor:pointer; max-height: 100%; max-width: 100%; width:auto; "
									ng-show="vm.exchange.details.goods[vm.exchange.lookupTable.me].category === 'Christmas'"
								/>
							</div>
						</md-card>
						<md-card-content style="padding: 0;">
							<div flex layout-fill layout="column">
								<div layout="column" layout-align="center center">
									<h2 class="md-title" style="padding: 7px; text-align: center;" ng-style="vm.exchange.details.goods[vm.exchange.lookupTable.me].fontcolor[0]">{{ vm.exchange.details.goods[vm.exchange.lookupTable.me].name}}</h2>

									<div 
										ng-bind-html="vm.meDesc"
										ng-style="vm.exchange.details.goods[vm.exchange.lookupTable.me].fontcolor[1]"
										class="md-subhead text-ex ex-story" 
										style="color:#7f8588; max-width: 100%; font-size:18px;"
									>
									</div>
								</div>
								<img
									class="ex-icon"
									data-ng-src="../../images/icon/{{vm.exchange.details.goods[vm.exchange.lookupTable.me].category}}.svg"
									style="height:24px; width:auto;"
								/>

								<img 
									class="circle card-ex" 
									ng-src="{{vm.exchange.details.goods[vm.exchange.lookupTable.me].user.photo_path}}"
								>
							</div>
						</md-card-content>
					</div>
				</md-card>
				<div flex="10" flex-sm="15" layout="column" layout-align="start center" style="padding-top:10%;">
					<p class="vertical isUp" ng-show="!vm.agreed">確認交換</p>
					<md-button class="md-fab ex-confirm" ng-show="!vm.agreed" ng-click="vm.onClickComplete($event)">
						<div layout layout-align="center center">
							<img src="../../images/icon(48-48).png" />
						</div>
					</md-button>
					<md-button class="md-fab white-btn" ng-show="!vm.agreed" ng-click="vm.onClickDelete($event, vm.exchange.eid)">
						<md-icon md-font-set="material-icons" style="color: #FFD54F">close</md-icon>
					</md-button>
					<p class="vertical isDown" ng-show="!vm.agreed">先不要換</p>
					<md-button class="md-fab ex-confirm md-hue-1 md-accent" ng-show="vm.agreed" disabled="true">
						<div layout layout-align="center center">
							<i class="material-icons confirm">done</i>
						</div>
					</md-button>
					<p class="vertical isDown" ng-show="vm.agreed">已確認交換</p>
					<a 
						ng-show="vm.agreed && vm.exchange.details.goods[vm.exchange.lookupTable.other].category === 'Christmas'"
						class="md-button white-btn btn-rwd" href="#" 
						socialshare socialshare-provider="facebook"
						socialshare-url="http://exwd.csie.org/xmas-share.html"
	  					style="min-width:40px;"
					>
						<md-icon md-font-set="material-icons">share</md-icon>
					</a>
				</div>
				<md-card flex="40" flex-sm="35" class="md-whiteframe-z3 item hvr-glow" ng-style="vm.exchange.details.goods[vm.exchange.lookupTable.other].bgStyle">
					<div layout="column">
						<md-card ng-style="vm.exchange.details.goods[vm.exchange.lookupTable.other].bgStyle">
							<div layout layout-align="center center" style="height:250px; width:auto;">
								<img 
									id='img_other' 
									crossorigin="anonymous" 
									ng-src="{{vm.exchange.details.goods[vm.exchange.lookupTable.other].photo_path[0]}}" 
									ng-click="vm.onClickGoods(vm.exchange.details.goods[vm.exchange.lookupTable.other].gid)" 
									class="md-card-image" 
									style="cursor:pointer; max-height: 100%; max-width: 100%; width:auto; "
									ng-show="vm.exchange.details.goods[vm.exchange.lookupTable.other].category !== 'Christmas'"
								>

								<img 
									id="img_me" 
									crossorigin="anonymous"
									src="./../images/Gift(Small).jpg"
									ng-click="vm.onClickGoods(vm.exchange.details.goods[vm.exchange.lookupTable.me].gid)"
									class="md-card-image"
									style="cursor:pointer; max-height: 100%; max-width: 100%; width:auto; "
									ng-show="vm.exchange.details.goods[vm.exchange.lookupTable.other].category === 'Christmas'"
								>
							</div>
						</md-card>
						<md-card-content style="padding: 0;">
							<div flex layout-fill layout="column">
								<div layout="column" layout-align="center center">
									<h2 class="md-title" style="padding: 7px; text-align: center;" ng-style="vm.exchange.details.goods[vm.exchange.lookupTable.other].fontcolor[0]">{{ vm.exchange.details.goods[vm.exchange.lookupTable.other].name}}</h2>

									<div 
										ng-bind-html="vm.otherDesc"
										ng-style="vm.exchange.details.goods[vm.exchange.lookupTable.other].fontcolor[1]"
										class="md-subhead text-ex ex-story" 
										style="color:#7f8588; max-width: 100%; font-size:18px;"
									>
									</div>
								</div>

								<img
									class="ex-icon"
									data-ng-src="../../images/icon/{{vm.exchange.details.goods[vm.exchange.lookupTable.other].category}}.svg"
									style="height:24px; width:auto;"
								/>

								<img class="circle card-ex" ng-src="{{vm.exchange.details.goods[vm.exchange.lookupTable.other].user.photo_path}}">
							</div>
						</md-card-content>
					</div>
				</md-card>
				<div flex="100" layout="column" ng-show="vm.exchange !== undefined" hide-gt-md>
					<div layout layout-align="center center" class="map-size">
						<img border="0" ng-src="//maps.googleapis.com/maps/api/staticmap?size={{vm.map.size}}&markers={{vm.map.marker}}" />
					</div>
				</div>
			</div>
		</div>
		<div ng-show="vm.exchange !== undefined" flex-gt-md="25" layout-gt-md="column" class="layout-ex right" hide-sm hide-md>
			<div class="map-size">
				<img border="0" ng-src="//maps.googleapis.com/maps/api/staticmap?size={{vm.map.size}}&markers={{vm.map.marker}}" />
			</div>
			<div class="chat-layout">
				<md-toolbar class="md-primary md-hue-2" layout layout-align="center center" style="min-height: 48px;">
					<span>{{vm.exchange.details.goods[vm.exchange.lookupTable.other].user.name}}</span>
				</md-toolbar>
				<ul class="discussion chat-ex" scroll='vm.chatroom.length > 0' upward-scroll="vm.loadMore()">
					<li ng-class="{true: 'other', false: 'self'}[chat.sender_uid !== {{ vm.myid }}]" ng-repeat="chat in vm.chatroom">
						<div class="avatar" ng-show="(chat.sender_uid !== {{ vm.myid }})">
							<div ng-show="(chat.sender_uid !== {{ vm.myid }})">
								<img ng-src="{{vm.exchange.details.goods[vm.exchange.lookupTable.other].user.photo_path}}" />
							</div>
							<md-tooltip ng-show="(chat.sender_uid !== {{ vm.myid }})">
								{{vm.exchange.details.goods[vm.exchange.lookupTable.other].user.name}}
							</md-tooltip>
						</div>
						<div class="messages" layout layout-align="center center">
							<p class="content">{{ chat.content }}</p>
							<md-tooltip>
								{{ chat.time }}
							</md-tooltip>
						</div>
					</li>
				</ul>
				<ul class="discussion input">
					<form ng-submit="vm.onSubmitChat()">
						<md-input-container>
							<label style="top:-5px;">輸入訊息...</label>
							<input type="text" ng-model="vm.chatContent" name="text" />
						</md-input-container>
						<input type="submit" id="submit" value="Submit" ng-show="false" />
					</form>
				</ul>
			</div>
		</div>
		<md-sidenav md-component-id="right" class="md-sidenav-right">
			<div class="chat-layout">
				<md-toolbar class="md-primary md-hue-2" layout layout-align="center center" style="min-height: 48px;">
					<span>聊天</span>
				</md-toolbar>
				<ul class="discussion chat-ex" scroll='vm.chatroom.length > 0' upward-scroll="vm.loadMore()">
					<li ng-class="{true: 'other', false: 'self'}[chat.sender_uid !== {{ vm.myid }}]" ng-repeat="chat in vm.chatroom">
						<div class="avatar" ng-show="(chat.sender_uid !== {{ vm.myid }})">
							<div ng-show="(chat.sender_uid !== {{ vm.myid }})">
								<img ng-src="{{vm.exchange.details.goods[vm.exchange.lookupTable.other].user.photo_path}}" />
							</div>
							<md-tooltip ng-show="(chat.sender_uid !== {{ vm.myid }})">
								{{vm.exchange.details.goods[vm.exchange.lookupTable.other].user.name}}
							</md-tooltip>
						</div>
						<div class="messages" layout layout-align="center center">
							<p class="content">{{ chat.content }}</p>
							<md-tooltip>
								{{ chat.time }}
							</md-tooltip>
						</div>
					</li>
				</ul>
				<ul class="discussion input">
					<form ng-submit="vm.onSubmitChat()">
						<md-input-container>
							<label style="top:-5px;">輸入訊息...</label>
							<input type="text" ng-model="vm.chatContent" name="text" />
						</md-input-container>
						<input type="submit" id="submit" value="Submit" ng-show="false" />
					</form>
				</ul>
			</div>
		</md-sidenav>
	</div>
</md-content>

